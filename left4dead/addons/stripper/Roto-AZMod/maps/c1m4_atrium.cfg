; This map is part of left4deadDLC4-l4d2onl4d1

; Harry modify 2023
filter:
; remove ammo and use our own settings
{
	"classname" "weapon_ammo_spawn"
}

; l4d2 official
add:
; ammo
{
    "origin" "-4479 -3874 44"
    "spawnflags" "2"
    "solid" "6"
    "skin" "0"
    "model" "models/props/terror/ammo_stack.mdl"
    "count" "5"
    "angles" "0 90 0"
    "classname" "weapon_ammo_spawn"
}

; from l4d2 the last stand update
add:
; anv_mapfixes
; clip
{
	; _booster_storefrontleft
    "mins" "-900 -16 0"
    "maxs" "900 82 36"
    "origin" "-4256 -4464 196"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
}

{
	; _booster_storefrontright
    "mins" "-169 -32 0"
    "maxs" "785 16 36"
    "origin" "-3344 -3280 196"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
}

;{
;	; _booster_pillarclip
;	"classname" "env_player_blocker"
;	"BlockType" "1"
;	"initialstate" "1" 
;	"mins" "-18 -32 0"
;	"maxs" "38 8 362"
;	"origin" "-3434 -3533 472"
;	"angles" "0 45 0"
;}

{
	; _booster_cedaplastic
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1" 
	"mins" "-125 -2 -22"
	"maxs" "130 1 186"
	"origin" "-2787 -4193 302"
}

{
	; _booster_thicklongledge
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1" 
	"mins" "-3856 0 -72"
	"maxs" "0 81 256"
	"origin" "-2368 -4224 1080"
}

;{
;	; _booster_nodrawcorner
;	"classname" "env_player_blocker"
;	"BlockType" "1"
;	"initialstate" "1" 
;	"mins" "-555 -400 0"
;	"maxs" "0 400 256"
;	"origin" "-5770 -3926 1024"
;	"angles" "0 45 0"
;}

{
	; _booster_libertymall
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1" 
	"mins" "-18 -257 0"
	"maxs" "18 257 500"
	"origin" "-2386 -3840 824"
}

{
	; _booster_fallbanner
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1" 
	"mins" "-1 -81 0"
	"maxs" "1 81 256"
	"origin" "-2929 -3889.5 991"
}

;{
;	; _booster_bridgeroof
;	"classname" "env_player_blocker"
;	"BlockType" "1"
;	"initialstate" "1" 
;	"mins" "-345 -110 0"
;	"maxs" "345 18 512"
;	"origin" "-3339 -3857 864"
;	"angles" "0 -70.5 0"
;}

{
	; _booster_hardhatsa
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1" 
	"mins" "-128 -14 0"
	"maxs" "128 14 512"
	"origin" "-3070 -4206 536"
}

{
	; _booster_hardhatsb
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1" 
	"mins" "-42 -14 0"
	"maxs" "42 14 512"
	"origin" "-3370 -4206 536"
}

{
	; _booster_highbalcony
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1" 
	"mins" "-260 -162 0"
	"maxs" "260 162 520"
	"origin" "-4695 -4336 792"
}

{
	; _booster_glassbalcony
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1" 
	"mins" "-128 -82 0"
	"maxs" "128 0 1"
	"origin" "-3688 -4334 791"
}

{
	; _nav_ladyshoes
	"classname" "env_player_blocker"
	"BlockType" "1"
	"initialstate" "1" 
	"mins" "-103 -3 0"
	"maxs" "70 3 56"
	"origin" "-4971 -4461 432"
}

{
	; _collision_atrium
	"classname" "env_player_blocker"
	"BlockType" "0"
	"initialstate" "1" 
	"mins" "-2400 -3200 -2"
	"maxs" "2400 3200 0"
	"origin" "-4452 -3208 0"
}

{
	; _kiosk_qol_1
	"classname" "env_player_blocker"
	"BlockType" "0"
	"initialstate" "1" 
	"mins" "-44 -44 -1"
	"maxs" "44 44 0"
	"origin" "-3208 -3864 94"
}

{
	; _kiosk_qol_2a
	"classname" "env_player_blocker"
	"BlockType" "0"
	"initialstate" "1" 
	"mins" "-44 -44 -1"
	"maxs" "44 44 0"
	"origin" "-4080 -4005 94"
}

{
	; _kiosk_qol_2b
	"classname" "env_player_blocker"
	"BlockType" "0"
	"initialstate" "1" 
	"mins" "-100 -1 -1"
	"maxs" "100 1 0"
	"origin" "-4081 -3949 94"
}

{
	; _kiosk_qol_3a
	"classname" "env_player_blocker"
	"BlockType" "0"
	"initialstate" "1" 
	"mins" "-44 -44 -1"
	"maxs" "44 44 0"
	"origin" "-4848 -3935 94"
}

{
	; _kiosk_qol_3b
	"classname" "env_player_blocker"
	"BlockType" "0"
	"initialstate" "1" 
	"mins" "-1 -100 -1"
	"maxs" "1 100 0"
	"origin" "-4796 -3936 94"
}
; trigduck
{
    ; _duckqol_informationbooth
    "targetname" "_duckqol_informationbooth"
	"spawnflags" "1"
    "origin" "-4448 -3865 44"
    "classname" "trigger_auto_crouch"
}

{
	"classname" "logic_auto"
	"OnMapSpawn" "_duckqol_informationbooth,AddOutput,mins -96 -8 0,0,-1"
	"OnMapSpawn" "_duckqol_informationbooth,AddOutput,maxs 96 8 64,0,-1"
	"OnMapSpawn" "_duckqol_informationbooth,AddOutput,solid 2,0,-1"
}

; anv_versus
add:
; ladder (7)
{
    ; _ladder_plywoodback_cloned_plywoodfront
    "classname" "func_simpleladder"
    "model" "*145"        
    "origin" "-6627 -8597 0"
    "angles" "0 180 0"
    "normal.x" "-1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    ; _ladder_columnfarcorner_cloned_columngibbs
	"classname" "func_simpleladder"
	;"model" "*139"
	;"origin" "-1008.53 0 0"
    ;"angles" "0 0 0"
    ;"normal.x" "-1.00"
    ;"normal.y" "0.00"
    ;"normal.z" "0.00"
    ;"team" "2"
    "origin" "-2184.58 1.96 16.65"
    "angles" "0.00 0.00 0.00"
    "model" "*143"        
    "normal.x" "0.00"
    "normal.y" "-1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    ; _ladder_columnbooth_cloned_columngibbs
	"classname" "func_simpleladder"
	"model" "*139"
	"origin" "-8255 1902 -220"
	"angles" "0 90 0"
    "normal.x" "1.00"
    "normal.y" "0.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    ; _ladder_columnplywood_cloned_columnbusystairs
	"classname" "func_simpleladder"
	;"model" "*141" 
	;"origin" "-504 0 0"
    ;"angles" "0 0 0"
    ;"normal.x" "-1.00"
    ;"normal.y" "0.00"
    ;"normal.z" "0.00"
    ;"team" "2"
    "origin" "-1008.66 0.53 -11.23"
    "angles" "0.00 0.00 0.00"
    "model" "*140"        
    "normal.x" "0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    ; _ladder_columnstairsright_cloned_columnbusystairs
	"classname" "func_simpleladder"
	;"model" "*141" 
	;"origin" "1008 0 -216"
    ;"angles" "0 0 0"
    ;"normal.x" "-1.00"
    ;"normal.y" "0.00"
    ;"normal.z" "0.00"
    ;"team" "2"
    "origin" "502.79 1.53 -225.11"
    "angles" "0.00 0.00 0.00"
    "model" "*140"        
    "normal.x" "0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    ; _ladder_columnstairsleft_cloned_columnbusystairs
	"classname" "func_simpleladder"
	;"model" "*141" 
	;"origin" "1512 0 -216"
    ;"angles" "0 0 0"
    ;"normal.x" "-1.00"
    ;"normal.y" "0.00"
    ;"normal.z" "0.00"
    ;"team" "2"
    "origin" "1007.82 -0.46 -225.18"
    "angles" "0.00 0.00 0.00"
    "model" "*140"        
    "normal.x" "0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

{
    ; _ladder_columnfallbanner_cloned_columnbusystairs
	"classname" "func_simpleladder"
	;"model" "*141" 
	;"origin" "2016 0 0"
    ;"angles" "0 0 0"
    ;"normal.x" "-1.00"
    ;"normal.y" "0.00"
    ;"normal.z" "0.00"
    ;"team" "2"
    "origin" "1510.30 -2.46 -223.57"
    "angles" "0.00 0.00 0.00"
    "model" "*140"        
    "normal.x" "0.00"
    "normal.y" "1.00"
    "normal.z" "0.00"
    "team" "2"
}

; from l4d2-zonemod
; ############  DIRECTOR AND EVENT CHANGES  ###########
; =====================================================
; ==          DIRECTOR & EVENT MODIFICATION          ==
; ==       Modify director behaviour and events      ==
; =====================================================
; --- Spawn tank at 29 seconds (just as the elevator opens) - This freezes the finale while giving teams a chance complete the elevator attack
modify:
{
	match:
	{
		"targetname" "button_elev_3rdfloor"
	}
	insert:
	{
		;"OnPressed" "pre_event_tank,SpawnZombie,,29,-1"
		;"OnPressed" "tank_wrongway,Enable,,28,-1"
		;"OnPressed" "tank_teleport_trigger,Enable,,29,-1"
		"OnPressed" "pre_event_tank,SpawnZombie,,30,-1"
		"OnPressed" "tank_wrongway,Enable,,29,-1"
		"OnPressed" "tank_teleport_trigger,Enable,,30,-1"
		"OnPressed" "radio_model,StartGlowing,,0,-1"
	}
}

add:
{
	"targetname" "pre_event_tank"
	"origin" "-2478 -4847 545"
	"population" "tank_l4d2_trap"
    "AttackOnSpawn" "0"
    "angles" "0 180 0"
    "classname" "info_zombie_spawn"
    "OnSpawnTank" "pre_event_tank,Kill,,0,-1"
}
; --- Wrong way sign for tanks that go the wrong way
{
	"classname" "prop_dynamic"
	"origin" "-2371 -4844 545"
	"angles" "0 180 0"
	"model" "models/props_placeable/wrong_way.mdl"
	"solid" "0"
	"disableshadows" "1"
	"rendercolor" "255 255 255"
	"targetname" "tank_wrongway"
	"StartDisabled" "1"
}
; --- Fix tank spawn direction
{
	"classname" "logic_auto"
	"OnMapSpawn" "tank_teleport_trigger,AddOutput,mins -134 -64 -128,0,-1"
	"OnMapSpawn" "tank_teleport_trigger,AddOutput,maxs 134 64 128,0,-1"
	"OnMapSpawn" "tank_teleport_trigger,AddOutput,boxmins -134 -64 -128,0,-1"
	"OnMapSpawn" "tank_teleport_trigger,AddOutput,boxmaxs 134 64 128,0,-1"
	"OnMapSpawn" "tank_teleport_trigger,AddOutput,solid 2,0,-1"
}
{
	"classname" "trigger_teleport"
	"origin" "-2459 -4848 664"
	"targetname" "tank_teleport_trigger"
	"filtername" "filter_infected"
	"spawnflags" "1"
	"StartDisabled" "1"
	"target" "tank_spawn_position"
	"OnStartTouch" "tank_teleport_trigger,Kill,,0,-1"
}
{
	"classname" "info_teleport_destination"
	"origin" "-2478 -4847 545"
	"angles" "0 180 0"
	"targetname" "tank_spawn_position"
}


; ################  ITEM SPAWN CHANGES  ###############
; =====================================================
; ==           PILL / ITEM / WEAPON SPAWNS           ==
; ==   Remove or change pill, item & weapon spawns   ==
; =====================================================
;add:
; --- Crowbar before the elevator
;{
;	"classname" "weapon_melee_spawn"
;	"origin" "-3052 -4252 -538"
;	"angles" "0 90 -90"
;	"melee_weapon" "crowbar"
;	"spawn_without_director" "1"
;	"solid" "0"
;	"disableshadows" "1"
;	"spawnflags" "2"
;	"count" "1"
;}
; --- Melee weapon by the information stand
;{
;	"classname" "weapon_melee_spawn"
;	"origin" "-4357 -3882 37"
;	"angles" "0 330 90"
;	"melee_weapon" "any"
;	"spawn_without_director" "1"
;	"solid" "0"
;	"disableshadows" "1"
;	"spawnflags" "2"
;	"count" "1"
;}

; =====================================================
; ==                STATIC AMMO PILES                ==
; ==          Add or modify ammo pile spawns         ==
; =====================================================

; =====================================================
; ==                 HITTABLE CHANGES                ==
; ==           Add/remove/modify hittables           ==
; =====================================================


; #############  MAP CLIPPING AND ISSUES  #############
; =====================================================
; ==                 EXPLOITS BLOCKED                ==
; ==      Block intentionally performed exploits     ==
; =====================================================

; =====================================================
; ==                  OUT OF BOUNDS                  ==
; ==  Block players getting outside / under the map  ==
; =====================================================

; =====================================================
; ==                   STUCK SPOTS                   ==
; ==  Prevent players from getting stuck in the map  ==
; =====================================================

; =====================================================
; ==                 NUISANCE CHANGES                ==
; ==      Clipping improvements, QOL map changes     ==
; =====================================================
add:
; --- Block gas cans (and players) from ending up in unreachable locations
; --- Lower Floor (1st)
; --- Re-opening Construction
;{
;	"classname" "env_physics_blocker"
;	"origin" "-2576 -4352 212"
;	"mins" "-208 -128 -20"
;	"maxs" "208 128 20"
;	"boxmins" "-208 -128 -20"
;	"boxmaxs" "208 128 20"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Georgia Pork Barrel
;{
;	"classname" "env_physics_blocker"
;	"origin" "-3682 -4436 196"
;	"mins" "-322 -44 -36"
;	"maxs" "322 44 36"
;	"boxmins" "-322 -44 -36"
;	"boxmaxs" "322 44 36"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Taco Bucket
;{
;	"classname" "env_physics_blocker"
;	"origin" "-4256 -4464 196"
;	"mins" "-176 -16 -36"
;	"maxs" "176 16 36"
;	"boxmins" "-176 -16 -36"
;	"boxmaxs" "176 16 36"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Wok on the Wild Side
;{
;	"classname" "env_physics_blocker"
;	"origin" "-4832 -4444 196"
;	"mins" "-320 -36 -36"
;	"maxs" "320 36 36"
;	"boxmins" "-320 -36 -36"
;	"boxmaxs" "320 36 36"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Empty Storefront
;{
;	"classname" "env_physics_blocker"
;	"origin" "-5536 -3312 196"
;	"mins" "-320 -48 -36"
;	"maxs" "320 48 36"
;	"boxmins" "-320 -48 -36"
;	"boxmaxs" "320 48 36"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Potato Safari
;{
;	"classname" "env_physics_blocker"
;	"origin" "-3344 -3284 196"
;	"mins" "-172 -20 -36"
;	"maxs" "172 20 36"
;	"boxmins" "-172 -20 -36"
;	"boxmaxs" "172 20 36"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Beef Boy Stew
;{
;	"classname" "env_physics_blocker"
;	"origin" "-2736 -3283 196"
;	"mins" "-176 -19 -36"
;	"maxs" "176 19 36"
;	"boxmins" "-176 -19 -36"
;	"boxmaxs" "176 19 36"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Middle Floor (2nd)
;; --- Re-opening Construction
;{
;	"classname" "env_physics_blocker"
;	"origin" "-2640 -4336 478"
;	"mins" "-272 -144 -10"
;	"maxs" "272 144 10"
;	"boxmins" "-272 -144 -10"
;	"boxmaxs" "272 144 10"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;{
;	"classname" "env_physics_blocker"
;	"origin" "-2464 -3873 478"
;	"mins" "-96 -319 -10"
;	"maxs" "96 319 10"
;	"boxmins" "-96 -319 -10"
;	"boxmaxs" "96 319 10"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Lady Shoes
;{
;	"classname" "env_physics_blocker"
;	"origin" "-4992 -4472 464"
;	"mins" "-176 -8 -24"
;	"maxs" "176 8 24"
;	"boxmins" "-176 -8 -24"
;	"boxmaxs" "176 8 24"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Unmarked Corner
;{
;	"classname" "env_physics_blocker"
;	"origin" "-6012 -3300 464"
;	"mins" "-172 -36 -24"
;	"maxs" "172 36 24"
;	"boxmins" "-172 -36 -24"
;	"boxmaxs" "172 36 24"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;{
;	"classname" "env_physics_blocker"
;	"origin" "-6324 -3388 480"
;	"mins" "-140 -124 -8"
;	"maxs" "140 124 8"
;	"boxmins" "-140 -124 -8"
;	"boxmaxs" "140 124 8"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Under Construction Storefront #1
;{
;	"classname" "env_physics_blocker"
;	"origin" "-5419 -3316 384"
;	"mins" "-235 -52 -104"
;	"maxs" "235 52 104"
;	"boxmins" "-235 -52 -104"
;	"boxmaxs" "235 52 104"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Under Construction Storefront #2
;{
;	"classname" "env_physics_blocker"
;	"origin" "-3373 -3312 472"
;	"mins" "-301 -48 -16"
;	"maxs" "301 48 16"
;	"boxmins" "-301 -48 -16"
;	"boxmaxs" "301 48 16"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Upper Floor (3rd)
;; --- Guardian Sports Source
;{
;	"classname" "env_physics_blocker"
;	"origin" "-3636 -4456 720"
;	"mins" "-320 -24 -24"
;	"maxs" "320 24 24"
;	"boxmins" "-320 -24 -24"
;	"boxmaxs" "320 24 24"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;{
;	"classname" "env_physics_blocker"
;	"origin" "-3636 -4416 720"
;	"mins" "-288 -16 -24"
;	"maxs" "288 16 24"
;	"boxmins" "-288 -16 -24"
;	"boxmaxs" "288 16 24"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Fauntletroy's
;{
;	"classname" "env_physics_blocker"
;	"origin" "-4179 -4438 720"
;	"mins" "-177 -42 -24"
;	"maxs" "177 42 24"
;	"boxmins" "-177 -42 -24"
;	"boxmaxs" "177 42 24"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Empty Storefront
;{
;	"classname" "env_physics_blocker"
;	"origin" "-4836 -4464 721"
;	"mins" "-321 -16 -24"
;	"maxs" "321 16 24"
;	"boxmins" "-321 -16 -24"
;	"boxmaxs" "321 16 24"
;	"initialstate" "1"
;	"BlockType" "4"
;}
;; --- Unmarked Corner
;{
;	"classname" "env_physics_blocker"
;	"origin" "-6247 -3354 736"
;	"mins" "-175 -134 -3"
;	"maxs" "175 134 3"
;	"boxmins" "-175 -134 -3"
;	"boxmaxs" "175 134 3"
;	"initialstate" "1"
;	"BlockType" "4"
;}
; --- Additional gas can blockers to prevent cans from being launched to locations that are unreachable for survivors, but still reachable for infected
; --- Elevator Shaft
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-4076 -3404 784"
;	"angles" "0 0 0"
;	"extent" "92 124 624"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;; --- Roof Top
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-5770 -3926 1216"
;	"angles" "0 45 0"
;	"extent" "278 400 192"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-4640 -4212 1244"
;	"angles" "0 0 0"
;	"extent" "2272 36 164"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;; --- Top Floor (4th)
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-5576 -3228 1104"
;	"angles" "0 0 0"
;	"extent" "848 340 304"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-4444 -3024 1104"
;	"angles" "0 0 0"
;	"extent" "284 136 304"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-3936 -3072 1104"
;	"angles" "0 0 0"
;	"extent" "224 184 304"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-3688 -4332 1104"
;	"angles" "0 0 0"
;	"extent" "232 156 304"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-4696 -4332 1100"
;	"angles" "0 0 0"
;	"extent" "232 156 308"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;; --- Top and Upper Floors (4th and 3rd)
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-3144 -3404 972"
;	"angles" "0 0 0"
;	"extent" "776 164 436"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;; --- Upper Floor (3rd)
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-6156 -3504 640"
;	"angles" "0 0 0"
;	"extent" "84 16 104"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-3372 -4208 772"
;	"angles" "0 0 0"
;	"extent" "52 16 236"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-2844 -4332 772"
;	"angles" "0 0 0"
;	"extent" "476 156 236"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-2468 -3872 972"
;	"angles" "0 0 0"
;	"extent" "100 304 436"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-3688 -4168 972"
;	"angles" "0 0 0"
;	"extent" "240 12 436"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;; --- Under Construction Bridge
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-3380 -3881 972"
;	"angles" "0 200 0"
;	"extent" "64 352 436"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}
;; --- Mall Exit Doors
;{
;	"classname" "script_clip_vphysics"
;	"origin" "-4448 -2308 704"
;	"angles" "0 0 0"
;	"extent" "416 4 704"
;	"filtername" "filter_gascan"
;	"StartDisabled" "0"
;}


; ###########  ADDITIONAL PROPS AND SPAWNS  ###########
; =====================================================
; ==                      PROPS                      ==
; ==       New props for balance and SI spawns       ==
; =====================================================

; =====================================================
; ==             LADDER / ELEVATOR NERF              ==
; ==   Nerf ladder & elevator attacks for infected   ==
; =====================================================
; --- Add a railing elevator so survivors can stand on it
;add:
;{
;	"classname" "prop_dynamic"
;	"origin" "-4065 -3404 573"
;	"angles" "0 0 0"
;	"model" "models/props_urban/elevator_rail001.mdl"
;	"solid" "0"
;	"disableshadows" "1"
;}
;{
;	"classname" "env_player_blocker"
;	"origin" "-4065 -3311 574"
;	"mins" "-71 -3 -1"
;	"maxs" "71 3 1"
;	"initialstate" "1"
;	"BlockType" "0"
;	"parentname" "elevator"
;}
;{
;	"classname" "env_player_blocker"
;	"origin" "-4065 -3497 574"
;	"mins" "-71 -3 -1"
;	"maxs" "71 3 1"
;	"initialstate" "1"
;	"BlockType" "0"
;	"parentname" "elevator"
;}
;{
;	"classname" "env_player_blocker"
;	"origin" "-4133 -3404 574"
;	"mins" "-3 -90 -1"
;	"maxs" "3 90 1"
;	"initialstate" "1"
;	"BlockType" "0"
;	"parentname" "elevator"
;}


; ############  MAP SOUND AND GFX CHANGES  ############
; =====================================================
; ==                  SOUND REMOVAL                  ==
; ==    Remove or adjust sounds played by the map    ==
; =====================================================

; =====================================================
; ==             GFX / PARTICLES REMOVAL             ==
; ==        Remove visual effects from the map       ==
; =====================================================


; ###############  TRIGGERS AND BRUSHES  ##############
; =====================================================
; ==                   CLIP REMOVAL                  ==
; ==      Remove miscellaneous clips and brushes     ==
; =====================================================

; =====================================================
; ==              TRIGGER REMOVAL / FIX              ==
; ==    Fix triggers that interfere with gameplay    ==
; =====================================================


; #############  LADDER CHANGES AND FIXES  ############
; =====================================================
; ==             LADDER ADDITIONS / FIXES            ==
; ==              Add or change ladders              ==
; =====================================================


; #######  MISCELLANEOUS / MAP SPECIFIC CHANGES  ######
; =====================================================
; ==                   BLANK HEADER                  ==
; ==                Blank description                ==
; =====================================================


; Harry personal settings
filter:
; --- Remove item spawns in bad locations or excessive density in a location
{
    "hammerid" "1288"
}
{
    "hammerid" "1282"
}
{
    "hammerid" "1158"
}
{
    "hammerid" "1293"
}
{
    "hammerid" "1160"
}
{
    "hammerid" "1287"
}
{
    "hammerid" "1295"
}
{
    "hammerid" "1283"
}
{
    "hammerid" "1291"
}
{
    "hammerid" "1292"
}
{
    "hammerid" "1283"
}
{
    "hammerid" "1296"
}
{
    "hammerid" "1294"
}
{
    "hammerid" "1157"
}
{
    "hammerid" "1286"
}
{
    "hammerid" "1156"
}
{
    "hammerid" "1289"
}
{
    "hammerid" "1290"
}
{
    "hammerid" "1292"
}
{
    "hammerid" "1283"
}
{
    "hammerid" "1291"
}
{
    "hammerid" "1581"
}
{
    "hammerid" "1582"
}
{
    "hammerid" "1580"
}
{
    "hammerid" "1592"
}
{
    "hammerid" "1591"
}
{
    "hammerid" "1589"
}

modify:
; --- replace kit with pills
{
	match:
	{
		"hammerid" "1280"
	}
	replace:
	{
		"classname" "weapon_pain_pills_spawn"
	}
}

add:
; clip
{
    ; block ceiling
    "BlockType" "1"
    "initialstate" "1"
    "mins" "-3500 0 0"
    "maxs" "0 1000 5000"
    "origin" "-2386 -4234 788"
    "classname" "env_player_blocker"
}

; pills
{
    "solid" "6"
	"origin" "1577.754272 2617.968750 -303.968750"
	"angles" "0 0 0"
	"classname" "weapon_pain_pills_spawn"
	"spawnflags" "2"
}

{
	"solid" "6"
	"origin" "-6125 -3407 280"
	"angles" "0 178 0"
	"classname" "weapon_pain_pills_spawn"
	"spawnflags" "2"
}

{
	"solid" "6"
	"origin" "-5982 -3456 537"
	"angles" "0 -180 0"
	"classname" "weapon_pain_pills_spawn"
	"spawnflags" "2"
}

{
	"solid" "6"
	"origin" "-2736 -3860 1"
	"angles" "0 -131 0"
	"classname" "weapon_pain_pills_spawn"
	"spawnflags" "2"
}

{
	"solid" "6"
	"origin" "-2424 -3303 280"
	"angles" "0 68 0"
	"classname" "weapon_pain_pills_spawn"
	"spawnflags" "2"
}

{
	"solid" "6"
	"origin" "-3508 -4246 536"
	"angles" "0 68 0"
	"classname" "weapon_pain_pills_spawn"
	"spawnflags" "2"
}

{
	"solid" "6"
	"origin" "-2955 -4419 280"
	"angles" "0 -1 0"
	"classname" "weapon_pain_pills_spawn"
	"spawnflags" "2"
}

{
	"solid" "6"
	"origin" "-4548 -4221 280"
	"angles" "0 152 0"
	"classname" "weapon_pain_pills_spawn"
	"spawnflags" "2"
}

; fight first tank before final starts
modify:
{
	match:
	{
		;"targetname" "elevator"
		"hammerid" "1095"
	}
	delete:
	{
		"OnReachedBottom" "relay_force_finale_start,Trigger,,0,-1"
	}
}

; move trigger_finale model outside the mall
modify:
{
	match:
	{
		;"targetname" "trigger_finale"
		;"classname" "trigger_finale"
		"hammerid" "1094"
	}
	replace:
	{
		"origin" "-5071 -1572 -55"
	}
}

add:
{
	"origin" "-4451.92 -3207.61 2"
	"targetname" "trigger_finale"
	"model" "models/props_mall/mall_display_03.mdl"
	"angles" "0 270 0"
	"classname" "prop_dynamic"
}

; final starts after press the fake radio
add:
{
	; glow model
	"targetname" "radio_model"
	"solid" "6"
	"origin" "-4738 -3997 48"
	"angles" "0 1 0"
	"model"	 "models/props/terror/hamradio.mdl"
	"classname" "prop_glowing_object"
	"GlowForTeam" "2"
	"StartGlowing" "0"
}
{
	; button
	"classname" "func_button"
	"targetname" "final_button"
	"origin" "-4738 -3997 48"
	"spawnflags" "1025"
	"rendermode" "0"
	"rendercolor" "255 255 255"
	"renderamt" "255"
	"OnPressed" "relay_force_finale_start,Trigger,,0.1,-1"
	"OnPressed" "radio_model,StopGlowing,,0,-1"
}
{
	"classname" "logic_auto"
	"OnMapSpawn" "final_button,AddOutput,mins -11 -15 0,0,-1"
	"OnMapSpawn" "final_button,AddOutput,maxs 11 15 20,0,-1"
	"OnMapSpawn" "final_button,AddOutput,solid 2,0,-1"
}

; scavenge_progress_null when new round
add:
{
	; nothing display on the screen. materials/scavenge/overlay_null.vtf created by harry
	"origin" "-5078 -3689 188"
	"targetname" "scavenge_progress_null"
	"OverlayTime1" "-1"
	"OverlayName1" "scavenge/overlay_null"
	"classname" "env_screenoverlay"
}

{
	"classname" "logic_auto"
	"OnMapSpawn" "scavenge_progress*,StopOverlays,,0,-1"
	"OnMapSpawn" "scavenge_progress_null,StartOverlays,,1.0,-1"
	"OnMapSpawn" "scavenge_progress_null,SwitchOverlay,1,1.0,-1"
	"OnMapSpawn" "scavenge_progress_null,StopOverlays,1,2.0,-1"
}

; remove gascan after fill the gas
modify:
{
	match:
	{
		;"targetname" "teleportGas"
		"hammerid" "27091"
	}
	insert:
	{
		"OnStartTouch" "!activator,Kill,,1,-1"
	}
}

; extend gas respawn
modify:
{
	match:
	{
		;"targetname" "timerRespawnGasCans1"
		;"RefireTime" "260"
		"hammerid" "26566"
	}
	replace:
	{
		"RefireTime" "260"
	}
}

; remove the campaign stats when playing versus
add:
{
	"classname" "info_gamemode"
	"OnVersus" "outro,Kill,,0,-1"
}

; fix evelator nav issue (bot get stuck) by The 9th survivor
modify:
{
	match:
	{
		"targetname" "button_elev_3rdfloor"
	}
	delete:
	{
		"OnPressed" "push_elevator,Disable,,1,1"
	}
}
{
	match:
	{
		"targetname" "@director"
	}
	insert:
	{
		"OnGameplayStart" "push_elevator,Disable,,0,1"
		"OnGameplayStart" "navblocker_elevator_top,UnblockNav,,0,1"
	}
}